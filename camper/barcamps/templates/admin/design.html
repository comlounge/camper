{% set menu="design" %}
{% extends "admin_master.html" %}

{% block content %}
<h1>{{_("Barcamp Design and Layout")}}</h1>
<div class="help-block">
    {{_('On this screen you should at least upload a logo or use the logo generator to create one. Optionally you can adjust the design to your liking.')}}
</div>
<div style="position: absolute; top: -100000px; left: -1000000px">
    <svg xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="4220" height="4218" viewBox="0 0 4220 4218" id="icon-svg">
        <g id="container" transform="scale(1.5)">
            <g transform="translate(6.17773, 3.72168)" style="fill:#26241f; fill-rule:nonzero; stroke:none; stroke-width:1; stroke-linecap:butt; stroke-linejoin:miter; stroke-dasharray:none;" >
                <path d="M34.5909 35.5508 C38.7022 33.8369 38.8662 27.2998 37.0401 23.8906 C34.5909 19.3183 28.4073 20.0781 24.2325 21.2715 C25.3897 17.9472 27.5127 13.4062 31.3467 12.75 C35.1534 12.0986 38.8799 14.4619 42.1905 15.9931 C45.1465 17.3623 50.3438 19.0801 52.4786 15.3457 C53.127 13.7695 51.2012 12.4707 49.5127 11.3994 C47.8282 10.3291 46.0342 9.30372 44.1612 8.60152 C84.7119 0 85.8301 85.081 42.9004 72.9551 C39.8008 72.081 36.8194 70.8213 33.9502 69.3672 C37.959 69.7002 42.2774 69.2754 45.4854 66.6748 C48.2325 64.4482 49.6827 59.8037 45.1563 58.7246 C41.0879 57.7549 36.6573 60.2324 32.6446 60.5732 C27.5918 61.0019 23.2832 61.1289 20.4102 57.1445 C22.6338 56.8672 24.3555 56.2754 25.2286 55.6435 C26.7403 54.5508 28.2051 53.0205 28.3379 51.0713 C28.5948 47.3408 25.7286 43.8467 22.5186 42.2578 C21.0342 41.5244 19.2578 41.2627 17.6543 41.7353 C15.5889 42.3447 14.9932 44.1269 13.5469 45.4971 C12.1309 46.8379 10.8086 47.8193 8.85747 48.209 C6.58207 48.6113 4.38277 47.5185 2.62989 46.1601 C1.67188 45.415 0.85645 44.5137 0 43.6572 C3.65821 44.1797 8.53517 45.123 10.6787 41.0185 C12.4024 37.7168 10.3565 33.9629 12.1787 30.6221 C14.5196 26.334 20.459 29.6943 23.376 31.3789 C26.7227 33.3125 30.0547 37.4394 34.5909 35.5508 Z" />
            </g>
            <g transform="translate(57.6143, 33.835)" style="fill:#ffffff; fill-rule:nonzero; stroke:none; stroke-width:1; stroke-linecap:butt; stroke-linejoin:miter; stroke-dasharray:none;" >
                <path d="M2.9394 23.3554 C5.25 20.0029 6.4716 16.0791 6.4716 12.0078 C6.4716 8.0244 5.3017 4.1728 3.0878 0.8711 C2.6269 0.1836 1.6953 0 1.0068 0.4599 C0.3183 0.9218 0.1347 1.8545 0.5957 2.542 C2.4775 5.3476 3.4716 8.6211 3.4716 12.0078 C3.4716 15.4677 2.4336 18.8027 0.4697 21.6523 C0 22.3349 0.1709 23.2685 0.8535 23.7392 C1.5351 24.2089 2.4697 24.0371 2.9394 23.3554 Z" />
            </g>
            <g transform="translate(63.4053, 29.9268)" style="fill:#ffffff; fill-rule:nonzero; stroke:none; stroke-width:1; stroke-linecap:butt; stroke-linejoin:miter; stroke-dasharray:none;" >
                <path d="M2.9394 31.248 C6.0586 26.7236 7.707 21.4218 7.707 15.916 C7.707 10.5322 6.1269 5.3291 3.1386 0.8711 C2.6767 0.1836 1.7451 0 1.0566 0.4609 C0.3681 0.9218 0.1845 1.8545 0.6465 2.542 C3.3027 6.5048 4.707 11.1289 4.707 15.916 C4.707 20.8115 3.2422 25.5244 0.4707 29.5449 C0 30.2275 0.1718 31.1611 0.8545 31.6318 C1.5351 32.1015 2.4697 31.9296 2.9394 31.248 Z" />
            </g>
            <g transform="translate(68.9297, 26.1963)" style="fill:#ffffff; fill-rule:nonzero; stroke:none; stroke-width:1; stroke-linecap:butt; stroke-linejoin:miter; stroke-dasharray:none;" >
                <path d="M0.6953 2.543 C4.0928 7.6103 5.8887 13.5244 5.8887 19.6465 C5.8887 25.9053 4.0146 31.9326 0.4707 37.0762 C0 37.7588 0.1719 38.6924 0.8545 39.1631 C1.5361 39.6328 2.4707 39.4609 2.9394 38.7793 C6.832 33.1318 8.8887 26.5166 8.8887 19.6465 C8.8887 12.9267 6.918 6.4346 3.1865 0.8721 C2.7256 0.1836 1.793 0 1.1055 0.4609 C0.418 0.9228 0.2344 1.8545 0.6953 2.543 Z" />
            </g>
        </g>
    </svg>
    <canvas id="exportcanvas" width="3000" height="1000" style="visibility: hidden"></canvas>
    <canvas id="finalcanvas" width="1140" height="335" style="visibility: hidden"></canvas>
    <p style="visibility: hidden; display: inline;" id="tmp_text"></p>
</div>

    
<div class="modal" id="logoeditor-modal" tabindex="-1" role="dialog" aria-labelledby="logoeditor-label"
    data-upload-url="{{url_for('barcamps.admin_design_upload', slug = slug)}}">
    <div class="modal-dialog">
        <div class="modal-content modal-lg">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="logoeditor-label">{{_('Logo Generator')}}</h4>
            </div>
            <div class="modal-body" id="logoeditor">
                <div>
                    <table class="inputtable">
                        <tbody>
                            <tr>
                                <td class="text-center"><img id="logoicon" width="50" height="50" src="{{url_for('static', filename='img/barcamplogo.svg')}}"></td>
                                <td>
                                    <input type="text" class="form-control logoinput" name="logoinput1" value="bar" id="logoinput1">
                                </td>
                                <td>
                                    <input type="text" class="form-control logoinput" name="logoinput2" value="camp" id="logoinput2">
                                </td>
                            </tr>
                            <tr id="colors">
                                <td>
                                    <div class="colorpicker-container-logo">
                                        <input type='text' 
                                               name='color_logo' 
                                               id="colorinput_logo"
                                               class="form-control colorinput" 
                                               value="#B5D749"/>
                                        <span class="input-group-addon"><i></i></span>
                                    </div>
                                </td>
                                <td>
                                    <div class="colorpicker-container-logo">
                                        <input type='text' 
                                               name='color1' 
                                               id="colorinput1" 
                                               class="form-control colorinput" 
                                               value="#5F7E53"/>
                                        <span class="input-group-addon"><i></i></span>
                                    </div>
                                </td>
                                <td>
                                    <div class="colorpicker-container-logo">
                                        <input type='text' 
                                               name='color2' 
                                               id="colorinput2" 
                                               class="form-control colorinput" 
                                               value="#B5D749" />
                                        <span class="input-group-addon"><i></i></span>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <br />
                
                <div> 
                    <p class="text-muted">{{_('Click on the colors to open a color picker')}}</p>
                    <canvas id="logocanvas" width="850" height="250"></canvas>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">{{_('Cancel')}}</button>
                <button type="button" id="save-as-logo-button" class="btn btn-primary">{{_('Save as logo')}}</button>
                <button type="button" disabled id="saving-as-logo-button" 
                        class="btn btn-primary" style="display: none;"><i class="fa fa-spinner fa-spin"></i> {{_('Saving ...')}}</button>
                <button type="button" id="save-as-png-button" class="btn btn-info">{{_('Download as PNG')}}</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<form id="design-form" method="POST" action="{{url}}">
    {# hidden fields for logo generator #}
    {{form.logo_color_logo()}}
    {{form.logo_color1()}}
    {{form.logo_color2()}}
    {{form.logo_text1()}}
    {{form.logo_text2()}}
    {{form.logo_scale()}}
    <fieldset>
        <legend>{{_('Logos and Gallery')}}</legend>

        {{ formmacros.form_field(form.logo, input_class="",
            label=_("Upload Image"), delete_label=_("Delete"), revert_label=("Revert"),
            logo_generator = _("Logo Generator"), 
            preview_url = view.logo_url.medium_user,
            upload_url=url_for("asset_upload", slug=slug), postproc="sponsor")}}
        
        {{ formmacros.form_field(form.background_image, input_class="",
            label=_("Upload Image"), delete_label=_("Delete"), revert_label=("Revert"),
            preview_url = view.background_image_url.medium_user,
            upload_url=url_for("asset_upload", slug=slug), postproc="sponsor")}}

        {{ formmacros.form_field(form.fb_image, input_class="",
            label=_("Upload Image"), delete_label=_("Delete"), revert_label=("Revert"),
            preview_url = view.fb_image_url.medium_user,
            upload_url=url_for("asset_upload", slug=slug), postproc="sponsor")}}

        {{ formmacros.form_field(form.gallery) }}
    </fieldset>

    <fieldset>
        <legend>{{_('Colors')}}</legend>
        <div class="alert alert-info alert-dismissable" role="alert">{{_('Click on the colors to open a color picker')}}</div>
        {# {{ formmacros.form_field(form.font, required=True, placeholder=_("Font to use"))}} #}
        <div class="row">
            <div class="col-sm-3">
                {{ formmacros.form_field(form.link_color, input_class="", required=True, placeholder=_('Link Color'))}}
            </div>
            <div class="col-sm-3">
                {{ formmacros.form_field(form.text_color, input_class="", required=True, placeholder=_('Text Color'))}}
            </div>
            <div class="col-sm-3">
                {{ formmacros.form_field(form.header_color, input_class="", required=True, placeholder=_('Header Background Color'))}}
            </div>
            <div class="col-sm-3">
                {{ formmacros.form_field(form.background_color, input_class="", required=True, placeholder=_('Background Color'))}}
            </div>
        </div>

        <div class="row">
            <div class="col-sm-4">
                {{ formmacros.form_field(form.navbar_link_color, input_class="", required=True, placeholder=_('Background Color'))}}
            </div>
            <div class="col-sm-4">
                {{ formmacros.form_field(form.navbar_border_color, input_class="", required=True, placeholder=_('Border Color'))}}
            </div>
            <div class="col-sm-4">
                {{ formmacros.form_field(form.navbar_hover_bg, input_class="", required=True, placeholder=_('Hover Background Color'))}}
            </div>
        </div>
        <div class="row">
            <div class="col-sm-6">
                {{ formmacros.form_field(form.navbar_active_color, input_class="", required=True, placeholder=_('Active Text Color'))}}
            </div>
            <div class="col-sm-6">
                {{ formmacros.form_field(form.navbar_active_bg, input_class="", required=True, placeholder=_('Active Background Color'))}}
            </div>
        </div>
        <h4>{{_('Sessionplan colors')}}</h4>
        <div class="row">
            <div class="col-sm-3">
                {{ formmacros.form_field(form.sp_row_bg, input_class="", required=True, placeholder=_('Row Background Color'))}}
            </div>
            <div class="col-sm-3">
                {{ formmacros.form_field(form.sp_row_color, input_class="", required=True, placeholder=_('Row Text Color'))}}
            </div>
            <div class="col-sm-3">
                {{ formmacros.form_field(form.sp_column_bg, input_class="", required=True, placeholder=_('Column Background Color'))}}
            </div>
            <div class="col-sm-3">
                {{ formmacros.form_field(form.sp_column_color, input_class="", required=True, placeholder=_('Column Text Color'))}}
            </div>
        </div>
    </fieldset>

    <fieldset>
        <legend>{{_('Advanced settings')}}</legend>
        {{ formmacros.form_field(form.hide_tabs) }}
    </fieldset>

    <input type="submit" class="btn btn-lg btn-primary" value="{{_('Save')}}">
</form>
{% endblock %}

